<?xml version="1.0" standalone="yes"?>
<AdventureData>
    <GlobalVariables>
        <Var id="HaveLight" value="0">1 = Has light source</Var>
    </GlobalVariables>
    <Sections>
        <Section>
            <GameTitle>Ransom2</GameTitle>
            <ScreenWidth>40</ScreenWidth>
            <ScreenMode>7</ScreenMode>
            <SourceFile>source.txt</SourceFile>
            <OutputFile>Ransom2.txt</OutputFile>
            <BuildType>Debug</BuildType>
            <Tokeniser>
            </Tokeniser>
            <TokenisedFileName>Ransom2</TokenisedFileName>
            <SSDBuilder>/Users/lardoBoffin/Documents/Beeb SWEH</SSDBuilder>
            <SSDName>Ransom2.SSD</SSDName>
            <BeebEmPath>/Applications/BeebEm Mac/BeebEm4.app</BeebEmPath>
            <SystemMessages>
                <Message id="Carrying">You are carrying</Message>
                <Message id="WhatNow">What now</Message>
                <Message id="CannotDoIt">You can't.</Message>
                <Message id="What">Pardon?</Message>
                <Message id="AnotherGame?">Press a key for another game...</Message>
                <Message id="Sure">Are you sure? (Y/N)...</Message>
                <Message id="GotThat">You've already got that.</Message>
                <Message id="HaveNotGotThat">You haven't got that.</Message>
                <Message id="CannotSeeIt">You can't see that.</Message>
                <Message id="TooHeavy">You're carrying too much to pick that up.</Message>
                <Message id="Score">Your score was </Message>
                <Message id="NoOfTurns">and you took </Message>
                <Message id="ItsDark">It is dark. You cannot see.</Message>
                <Message id="CannotFindIt">I can't find that anywhere.</Message>
                <Message id="AlsoSee">You can also see</Message>
                <Message id="OK">Okay </Message>
                <Message id="Turns">turns.</Message>
                <Message id="Nothing">nothing</Message>
            </SystemMessages>
            <GameVerbs>
                <Verb>North;N</Verb>
                <Verb>South;S</Verb>
                <Verb>East;E</Verb>
                <Verb>West;W</Verb>
                <Verb>Up;U</Verb>
                <Verb>Down;D</Verb>
                <Verb>Take;Get</Verb>
                <Verb>Drop</Verb>
                <Verb>Look</Verb>
                <Verb>Inventory;Inv</Verb>
                <Verb>Quit</Verb>
                <Verb>Words</Verb>
                <Verb>Pictures</Verb>
                <Verb>Save</Verb>
                <Verb>Restore</Verb>
                <Verb>Examine;Search</Verb>
                <Verb>Light;On</Verb>
                <Verb>Extinguish;Off</Verb>
                <Verb>Unlock;Open</Verb>
                <Verb>Score</Verb>
                <Verb>Eat</Verb>
                <Verb>Load</Verb>
            </GameVerbs>
            <Adverbs>
                <Adverb>WITH;USING</Adverb>
            </Adverbs>
            <Nouns>
                <Noun>Torch;Lamp</Noun>
                <Noun>Rat</Noun>
                <Noun>Key</Noun>
                <Noun>Gold;Bar</Noun>
                <Noun>Rope</Noun>
                <Noun>Snake;Serpent</Noun>
                <Noun>Door</Noun>
                <Noun>Tree</Noun>
                <Noun>CLS</Noun>
            </Nouns>
            <Variables>
                <Var id="TurnsInDark" value="0">Number of turns in the dark so far. 2 = death.</Var>
                <Var id="RatFed" value="0">1 = The snake has had a rat</Var>
                <Var id="IsFirstTurn" value="1">1 = first turn so maybe show an extended message</Var>
                <Var id="FoundKey" value="0">1 = have the key</Var>
                <Var id="DoorLocked" value="0">1 = the door is locked</Var>
                <Var id="TiedRope" value="0">1 = tied rope across crevas</Var>
            </Variables>
            <Objects>
                <Object id="_LAMP" number="1" weight="10" value="1" location="1" message="A lamp">
                </Object>
                <Object id="_RAT" number="2" weight="20" value="0" location="5" message="A dead rat">
                </Object>
                <Object id="_Key" number="3" weight="1" value="0" location="0" message="A key">
                </Object>
                <Object id="_GOLD" number="4" weight="100" value="150" location="6" message="A large, heavy gold bar">
                </Object>
                <Object id="_ROPE" number="5" weight="30" value="0" location="7" message="A long piece of rope">
                </Object>
                <Object id="_LIT_LAMP" number="6" weight="10" value="1" location="0" message="A lit lamp">
                </Object>
            </Objects>
            <Locations>
                <Location id="0">
                </Location>
                <Location id="1">
                    <Message>You find yourself on the bank of a mountain stream, which is crossed by a stone bridge leading East to a dark cave.</Message>
                    <Exit to="2">
                        <Verb>EAST</Verb>
                    </Exit>
                </Location>
                <Location id="2">
                    <Message>This is a very gloomy cavern, with pale sunlight to the West, and dim tunnels leading South and East.</Message>
                    <Flag id="0">1</Flag>
                    <Flag id="1">1</Flag>
                    <Flag id="2">1</Flag>
                    <Exit to="3">
                        <Verb>EAST</Verb>
                    </Exit>
                    <Exit to="1">
                        <Verb>WEST</Verb>
                    </Exit>
                    <Exit to="5">
                        <Verb>SOUTH</Verb>
                    </Exit>
                </Location>
                <Location id="3">
                    <Message>Traveling this East-West passage, you see another tunnel South, across a great crevasse. A small snake is asleep in its favourite cranny.</Message>
                    <Flag id="0">1</Flag>
                    <Exit to="4">
                        <Verb>EAST</Verb>
                    </Exit>
                    <Exit to="2">
                        <Verb>WEST</Verb>
                    </Exit>
                </Location>
                <Location id="4">
                    <Message>You have emerged onto the bank of a huge mountain lake. To the west is the tunnel, north is a small hut, and a solitary tree graces the waters edge.</Message>
                    <Exit to="3">
                        <Verb>WEST</Verb>
                    </Exit>
                    <Exit to="7">
                        <Verb>NORTH</Verb>
                    </Exit>
                </Location>
                <Location id="5">
                    <Message>A moat to the East surrounds a titanic fortress. The cave is North, and a door lies beyond the lowered drawbridge.</Message>
                    <Exit to="2">
                        <Verb>NORTH</Verb>
                    </Exit>
                </Location>
                <Location id="6">
                    <Message>Inside the castle is a bit grim, especially for any unlucky soul locked here in its dungeon. The door to the West ensures few escape.</Message>
                    <Flag id="0">1</Flag>
                    <Exit to="5">
                        <Verb>WEST</Verb>
                    </Exit>
                </Location>
                <Location id="7">
                    <Message>You are in a shed that is a bit ramshackle and about to fall down.</Message>
                    <Exit to="4">
                        <Verb>SOUTH</Verb>
                    </Exit>
                </Location>
                <Location id="8">
                    <Message>You shimmed across the rope and are now in a small cave.</Message>
                    <Exit to="3">
                        <Verb>NORTH</Verb>
                    </Exit>
                </Location>
            </Locations>
            <PreRoom>
            </PreRoom>
            <Init>
			PROCset(@IsFirstTurn,1):PROCset(@TurnsInDark,3):PROCenc(111)
		</Init>
            <HighPriority>
			IF FNflag(0) AND NOT FNon(@HaveLight) THEN PROCdec(@TurnsInDark)
			IF FNflag(0) AND NOT FNon(@HaveLight) AND FNget(@TurnsInDark)=1 THEN PROCmsg("You hear scuffling noises close by.")
			IF FNflag(0) AND NOT FNon(@HaveLight) AND FNget(@TurnsInDark)=0 THEN PROChold(50):PROCmsg("A giant spider with glowing red eyes leaps from the shadows and neatly severs your head with its powerful jaws before devouring you!"):PROCexit:=TRUE
			IF R%=3 THEN IF NOT FNavail(@_RAT) AND NOT FNon(@RatFed) THEN PROChold(50):PROCmsg("The snake awakens and springs out at you striking you with its venomous fangs. You die a fast but painful death."):PROCexit:=TRUE
			IF R%=3 THEN IF FNavail(@_RAT) AND NOT FNon(@RatFed) THEN PROChold(50):PROCmsg("The snake awakens and smells the dead rat. In an instant it has snatched it and eaten it! It then settles back into a deep sleep."):PROCset(@RatFed,1):PROCmove(@_RAT,0):CW%=CW%-20:=TRUE
			IF R%=1 THEN IF FNavail(@_GOLD):PROCmsg("Well done! The gold you have brought is enough to pay a king's ransom!!"):PROCexit:=TRUE
		</HighPriority>
            <LowPriority>
			IF V%=@On THEN IF N%=@CLS THEN PROCcls(1):=TRUE
			IF V%=@Off THEN IF N%=@CLS THEN PROCcls(0):=TRUE
			IF V%=@Save THEN PROCsave:=TRUE
			IF V%=@Load THEN PROCload:=TRUE
			IF R%=3 THEN IF V%=@Take AND N%=@Snake THEN PROCmsg("The snake awakens and springs out at you striking you with its venomous fangs. You die a fast but painful death."):PROCexit:=TRUE
			IF R%=3 THEN IF V%=@S THEN PROCmsg("Walls of granite rush past as you fall into the pit, consciousness deserts you and you perish on the rocks below!"):PROCexit:=TRUE
			IF R%=4 THEN IF V%=@Examine AND N%=@Tree AND NOT FNon(@FoundKey) THEN PROCset(@FoundKey,1):PROCmsg("On examining the tree, you dislodge something from a hole on a branch. It falls to the ground with a metallic clang."):PROCmove(@_KEY,4):=TRUE
			IF R%=5 THEN IF V%=@Unlock AND FNavail(@_KEY) AND N%=@Door AND NOT FNon(@DoorLocked):PROCset(@DoorLocked,1):PROCmsg("With a grating sound, the key turns in the lock and the door opens."):=TRUE
			IF R%=5 THEN IF V%=@East AND FNon(@DoorLocked) THEN:PROCgoto(6):=TRUE
			IF V%=@Examine THEN PROCmsg("You find nothing of interest."):=TRUE
			IF V%=@On AND N%=@Lamp THEN IF FNinInv(@_LAMP) THEN PROCswap(@_LAMP,@_LIT_LAMP):PROCset(@HaveLight,1):PROCmsg("You have lit the lamp."):=TRUE
			IF V%=@Off AND N%=@Lamp THEN IF FNinInv(@_LIT_LAMP) THEN PROCswap(@_LIT_LAMP,@_LAMP):PROCset(@HaveLight,0):PROCmsg("The lamp is off."):=TRUE
			IF V%=@Look THEN PROCgtRm(R%):=TRUE
			IF V%=@Drop THEN IF N%=@Lamp THEN IF FNinInv(@_LIT_LAMP) THEN PROCdrop(@_LIT_LAMP):PROCset(@HaveLight,0):=TRUE
			IF V%=@Get THEN IF N%=@Lamp THEN IF FNhere(@_LIT_LAMP) THEN PROCtake(@_LIT_LAMP):PROCset(@HaveLight,1):=TRUE
			IF V%=@Get THEN IF N%&lt;@Snake THEN PROCtake(N%):=TRUE
			IF V%=@Drop THEN IF N%&lt;@Snake THEN PROCdrop(N%):=TRUE
			IF V%=@Inv THEN PROCinv:=TRUE	
		</LowPriority>
        </Section>
    </Sections>
</AdventureData>