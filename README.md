# Adventure Language

I had previosuly developed a framework for creating BBC Micro text adventure games using Excel to hold the game data and build the output files which were then manually added to an SSD disc image. The details can be found here - https://stardot.org.uk/forums/viewtopic.php?f=65&t=14770#p197797

The data files were consumed by the BBC Basic program which was in effect the game engine - this program also included the appropriate game specific logic.

This approach had a number of issues:

1 - Excel was very clunky to use for this and not everybody has it

2 - The files it created (e.g. message files, object and location files) had to be manually added to the SSD image each time they were changed

3 - The game engine program also directly included the game specific code so if any bugs were fixed in the game engine or improvements made a new game engine program had to be created (effectively by deleting all game logic)

All of which is a pain. 

The new approach is to do away with Excel and hold all the game objects and logic in an XML file. The game logic is combined into a BBC Basic source file (held in plain text) at the appropriate points and then output a combination of game engine + logic and data files.

The BBC Basic source file can be amended and managed under souce control and any fixes applied can be retained for future versions as it is not amended during the game development process (and even if it is the source and logic are separate).

Each new game to be created is created as a project in a folder structure which is created by calling the "-new" command line with a path and project name (preferably kept to 7 letters - the reasoning behind this should be obvious to DFS users). 

Source.txt and AdventureData.xml are amended and then the "-b" (build) command line is used to 'compile' the project into the appropriate files.

Thanks to the presence of various programs for Windows and Mac (and the fact that the main project is written in .Net Core 3.1) it is possible to establish a full tool chain for development. So long as eveything is configured correctly once compiled the files are tokenised (Windows only), placed into an SSD file and BeebEm is started up with the SSD loaded and ready to go. On the Mac unfortunately the BASIC is not tokenised so the user has to press Command + W (to unlock drive 0) and then press 'F0' (which is mapped to F10 on my Mac) to call an *EXEC process to tokenise the program within the Beeb itself. Once tokenised the program is saved and run.

A compile .bat or .command file are generated by the project creation process in order to simplify the build / compile process.
